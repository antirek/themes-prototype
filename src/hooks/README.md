# Hooks (Vue Composables)

**Hooks** - это Vue composables, которые предоставляют общую логику для компонентов.

## useTheme

Универсальный хук для чтения CSS-переменных из тем. **Не зависит от конкретных названий тем** и может работать с любой системой темизации.

### Функциональность

- **Чтение CSS-переменных**: Автоматически ищет CSS-переменные во всех элементах с темами
- **Определение текущей темы**: Может определить активную тему страницы (без валидации)
- **Полная независимость**: Не требует передачи элементов или настройки
- **Универсальность**: Работает с любыми названиями тем

### API

```typescript
const { 
  getCssVariable,    // Читать CSS-переменную
  getCurrentTheme     // Получить текущую тему (string | null)
} = useTheme()
```

### Возвращаемые значения

- `getCssVariable: (variableName: string, defaultValue?: string) => string` - читать CSS-переменную
- `getCurrentTheme: () => string | null` - получить текущую активную тему (null если тема не определена)

### Использование

#### Базовое использование

```vue
<template>
  <div data-theme="custom-theme">
    <p>CSS переменная: {{ cssValue }}</p>
    <p>Текущая тема: {{ currentTheme }}</p>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useTheme } from '@/hooks'

const { getCssVariable, getCurrentTheme } = useTheme()

// Читаем CSS-переменную
const cssValue = computed(() => {
  return getCssVariable('--my-css-variable', 'default')
})

// Получаем текущую тему
const currentTheme = computed(() => {
  return getCurrentTheme()
})
</script>
```

#### Чтение CSS-переменных для компонентов

```vue
<template>
  <div class="user-avatar">
    <AvatarIcon :icon-type="iconType" />
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { useTheme } from '@/hooks'
import { AvatarIcon } from '@/components/atoms/AvatarIcon'

const { getCssVariable } = useTheme()

// Читаем CSS-переменную для определения типа иконки
const iconType = computed(() => {
  return getCssVariable('--thepro-useravatar-icon-type', 'default')
})
</script>
```

### Логика работы

1. **Поиск элементов с темами**: Ищет все элементы с атрибутом `data-theme`
2. **Чтение CSS-переменной**: Проходит по всем найденным элементам и ищет нужную переменную
3. **Fallback**: Если не нашел, проверяет `documentElement`
4. **Определение темы**: Ищет первый элемент с `data-theme` для определения активной темы

### Преимущества

- **Полная независимость**: Не нужно передавать элементы или настраивать
- **Универсальность**: Работает с любыми названиями тем
- **Простота**: Минимальный API, понятная логика
- **Производительность**: Читает переменные только при необходимости
- **Гибкость**: Может работать с любой системой темизации

### Когда использовать

- **Чтение CSS-переменных** из любых тем
- **Определение конфигурации** на основе темы
- **Динамическое переключение** стилей и поведения
- **Любые случаи**, когда нужно читать CSS-переменные без привязки к конкретным темам
- **Создание универсальных компонентов**, которые могут работать с разными системами темизации

### Принципы дизайна

- **Разделение ответственности**: Хук не знает о конкретных темах
- **Универсальность**: Может работать с любой системой темизации
- **Простота**: Минимальный API, максимум функциональности
- **Гибкость**: Легко адаптируется к разным проектам
