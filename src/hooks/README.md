# Hooks (Vue Composables)

Коллекция переиспользуемых Vue composables для общих задач.

## Назначение

Hooks - это Vue composables, которые:
- Инкапсулируют общую логику
- Могут использоваться в любом компоненте
- Предоставляют реактивные значения и методы
- Упрощают код компонентов

## Доступные хуки

### useTheme

Хук для определения текущей темы в любом компоненте.

#### Использование

```typescript
import { useTheme } from '@/hooks'

// В компоненте
const { currentTheme, detectTheme } = useTheme()
```

#### Параметры

- `element?: HTMLElement | null` - элемент для определения контекста темы

#### Возвращаемые значения

- `currentTheme: Ref<ThemeName>` - текущая тема
- `detectTheme: () => void` - функция для принудительного определения темы
- `startObserving: () => void` - начать наблюдение за изменениями
- `stopObserving: () => void` - остановить наблюдение
- `updateTargetElement: (element: HTMLElement | null) => void` - обновить целевой элемент

#### Примеры использования

```vue
<template>
  <div ref="containerRef">
    <p>Текущая тема: {{ currentTheme }}</p>
  </div>
</template>

<script setup lang="ts">
import { ref, watch } from 'vue'
import { useTheme } from '@/hooks'

const containerRef = ref<HTMLElement>()
const { currentTheme, updateTargetElement } = useTheme()

// Следим за изменениями ref и обновляем целевой элемент
watch(containerRef, (newElement) => {
  updateTargetElement(newElement || null)
}, { immediate: true })
</script>
```

#### Принципы работы

1. **Автоматическое определение** - хук автоматически определяет тему при монтировании
2. **Реактивность** - тема обновляется при изменении `data-theme` атрибутов
3. **Контекст** - может работать с конкретным элементом или глобально
4. **Производительность** - использует `MutationObserver` для эффективного отслеживания

## Архитектурные особенности

- **Переиспользование** - хуки можно использовать в любом компоненте
- **Инкапсуляция** - сложная логика скрыта внутри хука
- **Типизация** - полная поддержка TypeScript
- **Жизненный цикл** - автоматическое управление ресурсами (observers, timers)
- **Тестируемость** - логика вынесена в отдельные функции

## Создание новых хуков

При создании нового хука следуйте принципам:

1. **Единая ответственность** - хук должен решать одну задачу
2. **Переиспользование** - хук должен быть универсальным
3. **Типизация** - используйте TypeScript для всех параметров и возвращаемых значений
4. **Жизненный цикл** - правильно управляйте ресурсами
5. **Документация** - создавайте подробные примеры использования
